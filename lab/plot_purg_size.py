# Re-importing required library after execution state reset
import matplotlib.pyplot as plt

# Data

# top1_accuracies = [
#     17.384, 17.556, 18.933, 17.212, 18.761, 19.277, 17.384, 18.589, 20.31, 20.482,
#     20.482, 19.449, 19.966, 19.621, 18.417, 19.277, 22.892, 19.105, 19.966, 21.859,
#     20.482, 20.482, 22.892, 20.482, 21.343, 21.687, 22.547, 21.687, 19.449, 22.375,
#     22.547, 22.031, 23.064, 22.203, 22.375, 24.441, 23.236, 23.58, 22.375, 23.752,
#     23.752, 23.58, 24.441, 23.064, 24.269, 23.924, 25.129, 25.645
# ]

# # Additional entropy data
# entropy_values = [
#     0.775, 0.737, 0.759, 0.745, 0.763, 0.766, 0.745, 0.763, 0.713, 0.714,
#     0.74, 0.725, 0.733, 0.729, 0.729, 0.761, 0.744, 0.735, 0.73, 0.72,
#     0.697, 0.749, 0.709, 0.729, 0.732, 0.734, 0.688, 0.747, 0.717, 0.739,
#     0.731, 0.742, 0.699, 0.716, 0.72, 0.716, 0.724, 0.7, 0.69, 0.705,
#     0.7, 0.658, 0.673, 0.677, 0.653, 0.694, 0.627, 0.674
# ]

# background

# top1_accuracies = [
#     16.867,
#     18.417,
#     18.417,
#     18.072,
#     18.072,
#     19.105,
#     19.621,
#     20.138,
#     17.728,
#     20.138,
#     18.761,
#     20.654,
#     19.449,
#     19.966,
#     20.482,
#     19.277,
#     18.933,
#     21.17,
#     20.654,
#     20.482,
#     19.449,
#     20.826,
#     21.17,
#     22.892,
#     20.138,
#     20.138,
#     22.375,
#     22.547,
#     22.203,
#     22.203,
#     22.547,
#     21.687,
#     24.096,
#     22.375,
#     23.752,
#     22.892,
#     24.785,
#     23.408,
#     24.269,
#     24.269,
#     25.473,
#     23.924,
#     23.58,
#     23.924,
#     25.129,
#     23.752,
#     24.785,
#     24.269,
#     25.129,
#     24.441,
#     26.678,
#     25.301,
#     28.399,
#     26.506,
#     27.367,
#     29.432,
#     27.883,
#     26.678,
#     26.506,
#     29.604,
#     28.055,
#     29.604,
#     27.539,
#     29.26,
#     28.571,
#     31.325,
#     32.186,
#     30.809,
#     32.186,
#     32.358,
#     34.423,
#     32.53,
#     34.079,
#     37.005,
#     35.284,
#     36.661,
#     37.005,
#     37.349,
#     38.382,
#     38.382,
#     40.62,
#     42.513,
#     41.652,
#     41.652,
#     44.578,
#     41.997,
#     44.234,
#     44.062,
#     44.062,
#     43.546,
#     47.332,
#     46.644,
#     46.816,
#     47.676,
#     48.021,
#     47.332,
#     50.258,
#     51.463,
#     53.701,
#     50.602,
#     50.43,
#     51.807,
#     50.947,
#     49.053,
#     48.709,
#     48.021,
#     47.332,
#     47.676,
#     47.332,
#     47.504,
#     44.578,
#     45.439,
#     42.685,
#     40.792,
#     40.103,
#     40.103,
#     36.317,
#     33.907,
#     30.981,
#     31.497,
#     27.367,
#     24.269,
#     22.719,
#     23.58,
#     19.277,
#     15.146,
#     11.704,
#     10.327,
# ]

# entropy_values = [
#     0.781,
#     0.748,
#     0.762,
#     0.74,
#     0.765,
#     0.738,
#     0.757,
#     0.738,
#     0.743,
#     0.734,
#     0.719,
#     0.757,
#     0.733,
#     0.727,
#     0.74,
#     0.743,
#     0.754,
#     0.725,
#     0.71,
#     0.713,
#     0.719,
#     0.703,
#     0.741,
#     0.724,
#     0.742,
#     0.735,
#     0.734,
#     0.739,
#     0.712,
#     0.729,
#     0.729,
#     0.721,
#     0.713,
#     0.71,
#     0.702,
#     0.706,
#     0.721,
#     0.68,
#     0.705,
#     0.693,
#     0.683,
#     0.687,
#     0.633,
#     0.668,
#     0.695,
#     0.691,
#     0.661,
#     0.667,
#     0.625,
#     0.624,
#     0.623,
#     0.611,
#     0.615,
#     0.601,
#     0.63,
#     0.613,
#     0.596,
#     0.592,
#     0.592,
#     0.61,
#     0.589,
#     0.573,
#     0.597,
#     0.555,
#     0.585,
#     0.55,
#     0.557,
#     0.554,
#     0.535,
#     0.531,
#     0.541,
#     0.543,
#     0.507,
#     0.51,
#     0.531,
#     0.532,
#     0.539,
#     0.525,
#     0.546,
#     0.502,
#     0.506,
#     0.495,
#     0.496,
#     0.511,
#     0.48,
#     0.467,
#     0.439,
#     0.449,
#     0.421,
#     0.413,
#     0.401,
#     0.405,
#     0.429,
#     0.397,
#     0.376,
#     0.404,
#     0.384,
#     0.379,
#     0.373,
#     0.409,
#     0.409,
#     0.395,
#     0.364,
#     0.401,
#     0.37,
#     0.397,
#     0.408,
#     0.391,
#     0.407,
#     0.428,
#     0.4,
#     0.41,
#     0.433,
#     0.43,
#     0.453,
#     0.458,
#     0.452,
#     0.486,
#     0.47,
#     0.449,
#     0.478,
#     0.507,
#     0.514,
#     0.575,
#     0.551,
#     0.653,
#     0.705,
#     0.764,
# ]


# distortion
# top1_accuracies = [
#     59.38,
#     60.413,
#     57.831,
#     59.208,
#     59.38,
#     60.757,
#     58.864,
#     59.036,
#     59.897,
#     62.306,
#     57.831,
#     58.692,
#     58.52,
#     58.864,
#     60.241,
#     60.413,
#     58.692,
#     59.552,
#     61.79,
#     61.618,
#     60.585,
#     59.552,
#     60.585,
#     58.692,
#     59.725,
#     61.962,
#     61.618,
#     60.413,
#     61.446,
#     61.102,
#     62.306,
#     60.413,
#     61.618,
#     61.102,
#     61.274,
#     61.274,
#     62.134,
#     63.683,
#     62.306,
#     62.651,
#     62.134,
#     63.683,
#     61.962,
#     62.995,
#     62.651,
#     61.962,
#     64.028,
#     64.028,
#     60.929,
#     62.306,
#     62.306,
#     61.102,
#     62.995,
#     60.585,
#     61.79,
#     62.995,
#     62.306,
#     61.962,
#     61.618,
#     63.855,
#     61.618,
#     61.79,
#     60.757,
#     61.446,
#     60.413,
#     61.79,
#     60.929,
#     61.79,
#     60.929,
#     60.929,
#     61.79,
#     60.929,
#     60.757,
#     58.692,
#     60.413,
#     59.036,
#     58.003,
#     59.036,
#     60.069,
#     56.11,
#     58.003,
#     59.552,
#     56.627,
#     57.831,
#     56.627,
#     57.659,
#     56.799,
#     53.356,
#     55.594,
#     54.217,
#     52.496,
#     55.077,
#     55.25,
#     51.979,
#     53.356,
#     51.463,
#     50.947,
#     52.668,
#     50.602,
#     50.775,
#     49.742,
#     49.053,
#     48.365,
#     45.783,
#     44.234,
#     45.439,
#     44.923,
#     43.718,
#     43.029,
#     40.448,
#     38.898,
#     40.792,
#     40.964,
#     38.382,
#     36.661,
#     35.112,
#     34.423,
#     35.112,
#     33.046,
#     30.981,
#     30.809,
#     28.399,
#     28.055,
#     23.752,
#     22.719,
#     23.064,
#     19.793,
#     15.663,
# ]

# entropy_values = [
#     0.326,
#     0.329,
#     0.313,
#     0.334,
#     0.322,
#     0.32,
#     0.322,
#     0.317,
#     0.3,
#     0.317,
#     0.328,
#     0.322,
#     0.318,
#     0.337,
#     0.313,
#     0.318,
#     0.311,
#     0.322,
#     0.333,
#     0.295,
#     0.332,
#     0.317,
#     0.318,
#     0.326,
#     0.336,
#     0.332,
#     0.324,
#     0.311,
#     0.312,
#     0.336,
#     0.319,
#     0.331,
#     0.325,
#     0.34,
#     0.32,
#     0.332,
#     0.328,
#     0.343,
#     0.331,
#     0.322,
#     0.322,
#     0.34,
#     0.314,
#     0.328,
#     0.344,
#     0.329,
#     0.339,
#     0.342,
#     0.336,
#     0.326,
#     0.333,
#     0.34,
#     0.301,
#     0.347,
#     0.321,
#     0.331,
#     0.335,
#     0.327,
#     0.318,
#     0.327,
#     0.349,
#     0.321,
#     0.329,
#     0.342,
#     0.338,
#     0.326,
#     0.353,
#     0.336,
#     0.329,
#     0.349,
#     0.328,
#     0.323,
#     0.318,
#     0.365,
#     0.351,
#     0.322,
#     0.357,
#     0.34,
#     0.332,
#     0.342,
#     0.343,
#     0.36,
#     0.356,
#     0.374,
#     0.362,
#     0.365,
#     0.363,
#     0.369,
#     0.382,
#     0.374,
#     0.354,
#     0.369,
#     0.376,
#     0.385,
#     0.389,
#     0.383,
#     0.376,
#     0.381,
#     0.393,
#     0.389,
#     0.392,
#     0.398,
#     0.385,
#     0.395,
#     0.396,
#     0.398,
#     0.418,
#     0.449,
#     0.433,
#     0.429,
#     0.412,
#     0.449,
#     0.423,
#     0.409,
#     0.41,
#     0.453,
#     0.472,
#     0.446,
#     0.469,
#     0.474,
#     0.485,
#     0.502,
#     0.515,
#     0.48,
#     0.552,
#     0.576,
#     0.625,
#     0.664,
# ]


# background_3
# top1_accuracies = [
#     26.506,
#     25.99,
#     27.539,
#     27.539,
#     27.539,
#     28.399,
#     27.711,
#     29.088,
#     28.399,
#     28.571,
#     29.776,
#     29.088,
#     30.293,
#     30.465,
#     31.67,
#     29.26,
#     31.325,
#     32.874,
#     29.776,
#     31.67,
#     32.702,
#     32.358,
#     33.907,
#     32.014,
#     34.079,
#     31.67,
#     33.563,
#     35.284,
#     34.94,
#     33.391,
#     34.596,
#     36.661,
#     35.284,
#     37.522,
#     37.866,
#     37.349,
#     39.759,
#     37.694,
#     41.136,
#     40.792,
#     43.029,
#     40.792,
#     42.857,
#     43.373,
#     44.75,
#     47.504,
#     48.881,
#     49.914,
#     47.849,
#     50.258,
#     51.635,
#     52.496,
#     54.045,
#     54.561,
#     58.692,
#     57.831,
#     60.757,
#     61.274,
#     62.995,
#     63.167,
#     61.618,
#     62.823,
#     61.962,
#     63.339,
#     62.995,
#     63.339,
#     63.855,
#     64.2,
#     62.823,
#     64.372,
#     63.683,
#     65.232,
#     64.028,
#     63.339,
#     63.855,
#     63.855,
#     63.339,
#     62.823,
#     64.544,
#     62.651,
#     60.929,
#     64.372,
#     61.274,
#     62.478,
#     62.306,
#     62.478,
#     63.511,
#     61.79,
#     61.446,
#     59.725,
#     60.241,
#     60.413,
#     60.585,
#     57.659,
#     57.315,
#     60.585,
#     55.938,
#     57.143,
#     52.84,
#     54.561,
#     53.012,
#     55.25,
#     55.077,
#     52.668,
#     49.57,
#     48.537,
#     49.742,
#     45.783,
#     43.546,
#     43.718,
#     44.923,
#     42.513,
#     40.448,
#     39.071,
#     39.415,
#     37.866,
#     36.489,
#     34.94,
#     30.637,
#     34.251,
#     29.604,
#     28.227,
#     24.613,
#     24.785,
#     23.236,
#     17.212,
#     17.384,
#     14.458,
# ]

# entropy_values = [
#     0.669,
#     0.682,
#     0.664,
#     0.674,
#     0.688,
#     0.67,
#     0.672,
#     0.658,
#     0.654,
#     0.658,
#     0.648,
#     0.622,
#     0.63,
#     0.61,
#     0.632,
#     0.621,
#     0.614,
#     0.631,
#     0.634,
#     0.609,
#     0.623,
#     0.612,
#     0.617,
#     0.592,
#     0.59,
#     0.594,
#     0.582,
#     0.565,
#     0.555,
#     0.552,
#     0.552,
#     0.56,
#     0.545,
#     0.558,
#     0.535,
#     0.481,
#     0.499,
#     0.494,
#     0.488,
#     0.473,
#     0.478,
#     0.46,
#     0.475,
#     0.456,
#     0.419,
#     0.446,
#     0.431,
#     0.394,
#     0.431,
#     0.375,
#     0.375,
#     0.363,
#     0.353,
#     0.359,
#     0.33,
#     0.325,
#     0.322,
#     0.299,
#     0.293,
#     0.3,
#     0.297,
#     0.287,
#     0.292,
#     0.29,
#     0.282,
#     0.294,
#     0.287,
#     0.291,
#     0.313,
#     0.3,
#     0.285,
#     0.288,
#     0.302,
#     0.313,
#     0.288,
#     0.31,
#     0.293,
#     0.287,
#     0.291,
#     0.294,
#     0.345,
#     0.282,
#     0.31,
#     0.31,
#     0.297,
#     0.313,
#     0.303,
#     0.31,
#     0.33,
#     0.323,
#     0.333,
#     0.307,
#     0.309,
#     0.324,
#     0.35,
#     0.334,
#     0.325,
#     0.352,
#     0.352,
#     0.348,
#     0.355,
#     0.351,
#     0.349,
#     0.385,
#     0.369,
#     0.386,
#     0.38,
#     0.378,
#     0.4,
#     0.39,
#     0.408,
#     0.405,
#     0.404,
#     0.423,
#     0.458,
#     0.443,
#     0.463,
#     0.469,
#     0.442,
#     0.469,
#     0.484,
#     0.507,
#     0.52,
#     0.537,
#     0.57,
#     0.604,
#     0.644,
#     0.726,
# ]


# background_7

top1_accuracies = [
    12.909,
    13.081,
    12.909,
    12.737,
    12.737,
    13.769,
    13.425,
    14.286,
    14.974,
    13.081,
    14.286,
    13.425,
    13.425,
    13.941,
    13.253,
    13.769,
    13.253,
    15.146,
    13.941,
    15.318,
    15.835,
    13.941,
    14.458,
    15.491,
    13.769,
    13.253,
    14.458,
    13.081,
    14.974,
    13.425,
    14.286,
    13.081,
    15.491,
    13.769,
    16.351,
    13.941,
    16.007,
    15.146,
    15.663,
    16.179,
    16.351,
    15.146,
    16.695,
    16.007,
    14.974,
    14.63,
    16.351,
    15.663,
    15.146,
    17.556,
    17.384,
    17.9,
    16.867,
    17.212,
    17.9,
    17.556,
    17.212,
    17.212,
    18.417,
    17.728,
    18.417,
    20.31,
    18.244,
    19.621,
    18.933,
    20.31,
    20.826,
    19.621,
    18.244,
    21.515,
    20.138,
    24.785,
    20.31,
    19.449,
    24.269,
    21.343,
    20.654,
    21.687,
    21.17,
    21.687,
    21.687,
    22.031,
    22.375,
    24.096,
    24.269,
    23.924,
    24.096,
    23.408,
    26.85,
    24.957,
    25.129,
    27.022,
    28.055,
    25.473,
    27.194,
    26.85,
    27.883,
    28.227,
    28.399,
    30.293,
    28.916,
    28.399,
    30.293,
    27.539,
    28.916,
    29.432,
    30.12,
    29.948,
    29.088,
    29.776,
    30.465,
    33.046,
    32.53,
    31.497,
    31.325,
    33.046,
    30.637,
    29.088,
    27.194,
    27.367,
    25.301,
    25.301,
    21.17,
    20.654,
    18.589,
    17.556,
    14.974,
    12.565,
]

entropy_values = [
    0.835,
    0.844,
    0.819,
    0.838,
    0.803,
    0.838,
    0.827,
    0.794,
    0.827,
    0.811,
    0.797,
    0.835,
    0.79,
    0.832,
    0.811,
    0.805,
    0.805,
    0.796,
    0.787,
    0.829,
    0.77,
    0.807,
    0.819,
    0.818,
    0.78,
    0.79,
    0.835,
    0.794,
    0.79,
    0.816,
    0.791,
    0.777,
    0.812,
    0.783,
    0.807,
    0.814,
    0.797,
    0.75,
    0.777,
    0.746,
    0.774,
    0.809,
    0.79,
    0.775,
    0.767,
    0.785,
    0.755,
    0.736,
    0.803,
    0.74,
    0.763,
    0.778,
    0.759,
    0.782,
    0.754,
    0.745,
    0.745,
    0.725,
    0.718,
    0.747,
    0.733,
    0.688,
    0.727,
    0.716,
    0.718,
    0.712,
    0.708,
    0.695,
    0.702,
    0.701,
    0.635,
    0.654,
    0.656,
    0.705,
    0.661,
    0.636,
    0.643,
    0.646,
    0.679,
    0.655,
    0.617,
    0.611,
    0.626,
    0.633,
    0.622,
    0.633,
    0.596,
    0.63,
    0.59,
    0.569,
    0.58,
    0.563,
    0.563,
    0.529,
    0.556,
    0.539,
    0.553,
    0.542,
    0.519,
    0.501,
    0.551,
    0.53,
    0.502,
    0.519,
    0.503,
    0.497,
    0.486,
    0.5,
    0.483,
    0.478,
    0.465,
    0.486,
    0.475,
    0.44,
    0.47,
    0.494,
    0.468,
    0.478,
    0.491,
    0.467,
    0.496,
    0.494,
    0.509,
    0.506,
    0.522,
    0.562,
    0.668,
    0.755,
]

purge_sizes = list(range(len(top1_accuracies)))
# Font size settings
axis_label_fontsize = 18
axis_number_fontsize = 14
legend_fontsize = 18

# Create figure and primary axis with tight layout to remove margins
fig, ax1 = plt.subplots(figsize=(12, 7), tight_layout=True)

# Plot accuracy on primary axis
ax1.plot(
    purge_sizes,
    top1_accuracies,
    marker="o",
    linestyle="-",
    color="black",
    label="Top1 ACC",
)

# Highlight area from 0 to 32
ax1.axvspan(0, 32, color="yellow", alpha=0.3)

# Find max accuracy value in the range 0 to 32
max_value = max(top1_accuracies[:33])
max_index = top1_accuracies.index(max_value)

# Draw dashed lines only from the intersection to the axes
plt.axhline(y=max_value, color="green", linestyle="--", label="Max ACC [0-32]")
plt.axvline(x=max_index, color="green", linestyle="--")

# Draw reported result line at 22.89
# ax1.axhline(y=62.48, color="orange", linestyle="--", label="Our Result (62.48)")
# ax1.axhline(y=22.89, color="orange", linestyle="--", label="Our Result (22.89)")


# Set x-axis ticks
ax1.set_xticks([0, 2, 4, 8, 16, 32, 48, 64, 96, 128])

ax1.tick_params(axis="x", labelsize=axis_number_fontsize)
ax1.tick_params(axis="y", labelsize=axis_number_fontsize)

# Labels for accuracy axis
ax1.set_xlabel("Purge Size", fontsize=axis_label_fontsize)
ax1.set_ylabel("Top1 Acc", fontsize=axis_label_fontsize)
ax1.legend(fontsize=legend_fontsize, loc="lower center", bbox_to_anchor=(0.6, 0))
ax1.grid(True)

# Create secondary axis for entropy
ax2 = ax1.twinx()
ax2.plot(purge_sizes, entropy_values, linestyle="-", color="crimson", label="Entropy")

# Labels for entropy axis
ax2.set_ylabel("Entropy", fontsize=axis_label_fontsize, color="crimson")
ax2.tick_params(axis="y", labelsize=axis_number_fontsize, colors="gray")


# Save and display plot
plt.savefig("plot_purge_size_entropy_background_7_128.pdf")
plt.show()
